<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lobbies</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
    <ul id="lobbyList"></ul>

    <script>
        var lobbyList = document.getElementById('lobbyList');
        var numLobbies = 4;

        for(var i = 0; i < numLobbies; i++) {
            var item = document.createElement('li');
            var buttonName = document.createTextNode('Lobby' + i);
            var button = document.createElement('button');
            button.setAttribute('onclick', 'joinLobby(' + i + ')');
            button.appendChild(buttonName);
            item.appendChild(button);

            lobbyList.appendChild(item);
        }

        function joinLobby(lobbyIndex) {
            $.get(`services/lobbylist/map?lobbyIndex=${lobbyIndex}`,
            function(data){
                localStorage.setItem('mapJson', data);
                localStorage.setItem('lobbyIndex', lobbyIndex);
                location.href = 'lobby.html';
            });

        }
    </script>
</body>
</html>